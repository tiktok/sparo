<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-pages/reference/security" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Security | Sparo</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://tiktok.github.io/sparo/preview-chore-website-preview/images/site/sparo-ograph.png"><meta data-rh="true" name="twitter:image" content="https://tiktok.github.io/sparo/preview-chore-website-preview/images/site/sparo-ograph.png"><meta data-rh="true" property="og:url" content="https://tiktok.github.io/sparo/preview-chore-website-preview/pages/reference/security/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Security | Sparo"><meta data-rh="true" name="description" content="Because the Sparo tool acts as a wrapper for Git, our goal is to provide comparable security expectations as the git command."><meta data-rh="true" property="og:description" content="Because the Sparo tool acts as a wrapper for Git, our goal is to provide comparable security expectations as the git command."><link data-rh="true" rel="icon" href="/sparo/preview-chore-website-preview/images/site/sparo-favicon.ico"><link data-rh="true" rel="canonical" href="https://tiktok.github.io/sparo/preview-chore-website-preview/pages/reference/security/"><link data-rh="true" rel="alternate" href="https://tiktok.github.io/sparo/preview-chore-website-preview/pages/reference/security/" hreflang="en"><link data-rh="true" rel="alternate" href="https://tiktok.github.io/sparo/preview-chore-website-preview/pages/reference/security/" hreflang="x-default"><link rel="stylesheet" href="/sparo/preview-chore-website-preview/assets/css/styles.391b5f94.css">
<script src="/sparo/preview-chore-website-preview/assets/js/runtime~main.8b4ffac0.js" defer="defer"></script>
<script src="/sparo/preview-chore-website-preview/assets/js/main.b269be8b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_LamT" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/sparo/preview-chore-website-preview/"><div class="navbar__logo"><img src="/sparo/preview-chore-website-preview/images/site/sparo-title.svg" alt="Sparo" class="themedComponent_tC9f themedComponent--light_jvOP"><img src="/sparo/preview-chore-website-preview/images/site/sparo-title-dark.svg" alt="Sparo" class="themedComponent_tC9f themedComponent--dark_id3o"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_STns"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/sparo/preview-chore-website-preview/pages/reference/security/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/sparo/preview-chore-website-preview/pages/guide/getting_started/">Docs</a><a href="https://github.com/tiktok/sparo" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_AFhm"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/sparo/preview-chore-website-preview/pages/support/news/">News</a><a class="navbar__item navbar__link" href="/sparo/preview-chore-website-preview/pages/support/help/">Help</a><div class="toggle_dsLe colorModeToggle_c7_9"><button class="clean-btn toggleButton_q0G2 toggleButtonDisabled_vKJd" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_ZA7w"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_BTHv"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_k7BV"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper__eEv"><div class="docsWrapper_yhQ2"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_nWl5" type="button"></button><div class="docRoot_uN8L"><aside class="theme-doc-sidebar-container docSidebarContainer_m9ih"><div class="sidebarViewport_lQsM"><div class="sidebar_u_rd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_tEKE"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/guide/getting_started/">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/guide/sparo_profiles/">Sparo profiles</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/reference/git_optimization/">Git optimization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/reference/skeleton_folders/">Skeleton folders</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/sparo/preview-chore-website-preview/pages/reference/security/">Security</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Config files</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/configs/profile_json/">&lt;profile-name&gt;.json</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Commands</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/commands/overview/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/commands/sparo_auto-config/">sparo auto-config</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/commands/sparo_checkout/">sparo checkout</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/commands/sparo_clone/">sparo clone</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/commands/sparo_fetch/">sparo fetch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/commands/sparo_pull/">sparo pull</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/commands/sparo_git-checkout/">sparo git-checkout</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/commands/sparo_git-clone/">sparo git-clone</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/commands/sparo_git-fetch/">sparo git-fetch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/commands/sparo_git-pull/">sparo git-pull</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/commands/sparo_init-profile/">sparo init-profile</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/commands/sparo_list-profiles/">sparo list-profiles</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">CI Commands</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/ci_commands/overview/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/ci_commands/sparo-ci_checkout/">sparo-ci checkout</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/ci_commands/sparo-ci_clone/">sparo-ci clone</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Support</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/support/help/">Getting help</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/support/news/">What&#x27;s new</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sparo/preview-chore-website-preview/pages/support/contributing/">Contributing</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_rbFp"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_hig1"><div class="docItemContainer_BjA9"><article><div class="tocCollapsible_uNMm theme-doc-toc-mobile tocMobile_R8tC"><button type="button" class="clean-btn tocCollapsibleButton_IgjO">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Security</h1></header><p>Because the Sparo tool acts as a wrapper for Git, our goal is to provide comparable security expectations as the <code>git</code> command.</p>
<blockquote>
<p>⚠️ <strong>This is a goal not a guarantee.</strong> ⚠️</p>
<p>The software is still in its early stages of development, and not all security
requirements have been identified or implemented yet.  Efforts to improve Sparo
security should not be interpreted to contradict the terms of the MIT license:</p>
<div class="codeBlockContainer_nK63 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_BFef"><pre tabindex="0" class="prism-code language-text codeBlock_BUQB thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_dbG7"><span class="token-line" style="color:#393A34"><span class="token plain">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span><br></span></code></pre><div class="buttonGroup_z3hN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_p991" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_DQfU"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Yj5J"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_tnRO" id="security-scenarios">Security scenarios<a href="#security-scenarios" class="hash-link" aria-label="Direct link to Security scenarios" title="Direct link to Security scenarios">​</a></h2>
<p>Git doesn&#x27;t provide a formal security specification, so to facilitate analysis of Sparo contributions, we&#x27;ve identified usage scenarios that imply security requirements. We welcome your feedback -- please <a href="/sparo/preview-chore-website-preview/pages/support/contributing/">let us know</a> if we&#x27;ve overlooked an important use case or if Git does not behave as described.</p>
<h3 class="anchor anchorWithStickyNavbar_tnRO" id="ss1-safely-clone-an-untrusted-repo">SS1: Safely clone an untrusted repo<a href="#ss1-safely-clone-an-untrusted-repo" class="hash-link" aria-label="Direct link to SS1: Safely clone an untrusted repo" title="Direct link to SS1: Safely clone an untrusted repo">​</a></h3>
<p>Suppose that an unfamiliar remote Git repository contains malicious files, which includes malicious config files such as <code>.gitattributes</code>, <code>.gitignore</code>, and Git hook scripts.  The following operations are expected to be safe:</p>
<ul>
<li>Using <code>git clone</code> to clone the remote repo.</li>
<li>Using <code>git checkout</code> to checkout files.</li>
<li>Using <code>git commit</code> to commit modifications of local files.</li>
</ul>
<p>Git ensures safety by ignoring Git hooks and <code>.gitattributes</code> filters by default.  The user must explicitly run a command to &quot;opt-in&quot;, signifying their trust that the repository is free from malicious code.  For example, invoking <code>rush install</code> will register predefined Git hooks, because NPM installation involves executing untrusted scripts and therefore signifies trust in the cloned repository.  As another example, if <code>.gitattributes</code> references the LFS filter, the user must first opt-in by running <code>git lfs install</code>, signifying their trust that the filter author has implemented security protections against malicious inputs for that filter.</p>
<p>Sparo introduces additional config files such as <a href="/sparo/preview-chore-website-preview/pages/configs/profile_json/">&lt;profile-name&gt;.json</a>.  Parsing of these config files must also treat the inputs as potentially malicious, and provide the same guarantees.</p>
<h3 class="anchor anchorWithStickyNavbar_tnRO" id="ss2-safely-clone-an-untrusted-repository-parameter">SS2: Safely clone an untrusted repository parameter<a href="#ss2-safely-clone-an-untrusted-repository-parameter" class="hash-link" aria-label="Direct link to SS2: Safely clone an untrusted repository parameter" title="Direct link to SS2: Safely clone an untrusted repository parameter">​</a></h3>
<p>A command such as <code>git clone https://github.com/example/project.git</code> will write into a subfolder called <code>project</code>.  The Git documentation calls this the <a href="https://git-scm.com/docs/git-clone#Documentation/git-clone.txt-ltdirectorygt" target="_blank" rel="noopener noreferrer">&quot;humanish&quot;</a> portion of the URL.</p>
<p>Consider a remote service that receives the <code>REPOSITORY</code> parameter as a text string and then invokes <code>git clone REPOSITORY</code> with correct shell-escaping of the parameter.  In calculating the humanish folder name, Git should not incorporate special characters such as <code>..</code> or <code>/</code> that would cause the operation to write cloned files outside of the intended folder.</p>
<p>And of course, if an explicit target folder is specified using <code>git clone https://github.com/example/project.git my-folder</code>, then no files should be cloned outside of the <code>my-folder</code> folder.</p>
<h3 class="anchor anchorWithStickyNavbar_tnRO" id="ss3-git-parameters-may-include-special-characters">SS3: Git parameters may include special characters<a href="#ss3-git-parameters-may-include-special-characters" class="hash-link" aria-label="Direct link to SS3: Git parameters may include special characters" title="Direct link to SS3: Git parameters may include special characters">​</a></h3>
<p>Shell interpreters commonly transform expressions involving special characters such as <code>$</code>, <code>%</code>, <code>(</code>, etc.  For example:</p>
<div class="language-shell codeBlockContainer_nK63 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_BFef"><pre tabindex="0" class="prism-code language-shell codeBlock_BUQB thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_dbG7"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Problem: Bash would replace &quot;$project&quot; with the value of</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># the environment variable whose name is &quot;project&quot;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/example/project.git </span><span class="token variable" style="color:#36acaa">$project</span><br></span></code></pre><div class="buttonGroup_z3hN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_p991" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_DQfU"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Yj5J"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This requires escaping:</p>
<div class="language-shell codeBlockContainer_nK63 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_BFef"><pre tabindex="0" class="prism-code language-shell codeBlock_BUQB thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_dbG7"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># This backslash escape ensures that a literal dollar sign</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># is included in the created folder name:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/example/project.git </span><span class="token punctuation" style="color:#393A34">\</span><span class="token variable" style="color:#36acaa">$project</span><br></span></code></pre><div class="buttonGroup_z3hN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_p991" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_DQfU"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Yj5J"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When the <code>sparo</code> command-line invokes subprocesses such as <code>git</code>, it must carefully ensure that process arguments are correctly escaped to avoid being transformed by the shell.  For example, if <code>\$project</code> gets expanded by the shell during subprocess invocation, the escaping will be defeated, which could be exploited to circumvent the other Sparo security guarantees.  If certain characters <a href="https://github.com/microsoft/rushstack/blob/e2a17c81731cadc6b39b8e75c08dfccb9bc5ce9c/libraries/node-core-library/src/Executable.ts#L689" target="_blank" rel="noopener noreferrer">cannot be safely escaped</a> by Node.js, they should be rejected with an error message.</p>
<h2 class="anchor anchorWithStickyNavbar_tnRO" id="security-assumptions">Security assumptions<a href="#security-assumptions" class="hash-link" aria-label="Direct link to Security assumptions" title="Direct link to Security assumptions">​</a></h2>
<p>It&#x27;s also useful to point out aspects that are NOT expected to be secure.</p>
<h2 class="anchor anchorWithStickyNavbar_tnRO" id="assumption-shell-environment-variables-are-trusted">Assumption: Shell environment variables are trusted<a href="#assumption-shell-environment-variables-are-trusted" class="hash-link" aria-label="Direct link to Assumption: Shell environment variables are trusted" title="Direct link to Assumption: Shell environment variables are trusted">​</a></h2>
<p>For the most part, the <code>git</code> CLI assumes that the shell environment variables are trusted.  For example, it relies on the <code>PATH</code> variable to discover the location of the <code>ssh</code> binary, and most of the parent process&#x27;s variables are passed through to child processes.</p>
<p>Because Sparo the tool is invoked by the Node.js runtime, arbitrary code execution is possible via environment variables such as <a href="https://nodejs.org/api/cli.html#node_optionsoptions" target="_blank" rel="noopener noreferrer">NODE_OPTIONS</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_tnRO" id="assumption-command-line-is-generally-trusted">Assumption: Command line is generally trusted<a href="#assumption-command-line-is-generally-trusted" class="hash-link" aria-label="Direct link to Assumption: Command line is generally trusted" title="Direct link to Assumption: Command line is generally trusted">​</a></h2>
<p>The <code>git</code> command-line accepts parameters such as <a href="https://git-scm.com/docs/git#Documentation/git.txt--cltnamegtltvaluegt" target="_blank" rel="noopener noreferrer">-c</a> which can trigger execution of arbitrary code.  Therefore in general, we assume that the command-line parameters are trusted.  However, certain parameters can provide stricter guarantees, for example the <code>&lt;repository&gt;</code> argument for <code>git clone</code> mentioned in <strong>SS3</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_tnRO" id="assumption-commands-may-consume-excessive-resources">Assumption: Commands may consume excessive resources<a href="#assumption-commands-may-consume-excessive-resources" class="hash-link" aria-label="Direct link to Assumption: Commands may consume excessive resources" title="Direct link to Assumption: Commands may consume excessive resources">​</a></h2>
<p>Commands such as <code>git clone</code> may consume an arbitrary amount of disk space or take arbitrarily long to complete. In general, denial-of-service attacks are not considered an important risk for this type of development tool.</p>
<h2 class="anchor anchorWithStickyNavbar_tnRO" id="assumption-stdout-and-stderr-may-contain-arbitrary-characters">Assumption: STDOUT and STDERR may contain arbitrary characters<a href="#assumption-stdout-and-stderr-may-contain-arbitrary-characters" class="hash-link" aria-label="Direct link to Assumption: STDOUT and STDERR may contain arbitrary characters" title="Direct link to Assumption: STDOUT and STDERR may contain arbitrary characters">​</a></h2>
<p>When invoking the <code>git</code> CLI, the console output may include strings printed by hook scripts or other shell commands. These strings may contain special characters that are unsafe to embed in other contexts such as an HTML document or SQL string literal. It is the responsibility of the calling processes to correctly escape any STDOUT or STDERR output produced by the <code>git</code> or <code>sparo</code> process.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/tiktok/sparo/tree/main/apps/website/docs/pages/reference/security.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_asm8" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_UiTm"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/sparo/preview-chore-website-preview/pages/reference/skeleton_folders/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Skeleton folders</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/sparo/preview-chore-website-preview/pages/configs/profile_json/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">&lt;profile-name&gt;.json</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_lG5c thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#security-scenarios" class="table-of-contents__link toc-highlight">Security scenarios</a><ul><li><a href="#ss1-safely-clone-an-untrusted-repo" class="table-of-contents__link toc-highlight">SS1: Safely clone an untrusted repo</a></li><li><a href="#ss2-safely-clone-an-untrusted-repository-parameter" class="table-of-contents__link toc-highlight">SS2: Safely clone an untrusted repository parameter</a></li><li><a href="#ss3-git-parameters-may-include-special-characters" class="table-of-contents__link toc-highlight">SS3: Git parameters may include special characters</a></li></ul></li><li><a href="#security-assumptions" class="table-of-contents__link toc-highlight">Security assumptions</a></li><li><a href="#assumption-shell-environment-variables-are-trusted" class="table-of-contents__link toc-highlight">Assumption: Shell environment variables are trusted</a></li><li><a href="#assumption-command-line-is-generally-trusted" class="table-of-contents__link toc-highlight">Assumption: Command line is generally trusted</a></li><li><a href="#assumption-commands-may-consume-excessive-resources" class="table-of-contents__link toc-highlight">Assumption: Commands may consume excessive resources</a></li><li><a href="#assumption-stdout-and-stderr-may-contain-arbitrary-characters" class="table-of-contents__link toc-highlight">Assumption: STDOUT and STDERR may contain arbitrary characters</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 TikTok Pte. Ltd.</div></div></div></footer></div>
</body>
</html>